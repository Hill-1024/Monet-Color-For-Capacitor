# Android Dynamic Color (Monet) Capacitor Plugin

This plugin provides access to the Android 12+ "Material You" (Monet) dynamic system colors. It allows your Capacitor application to extract the user's wallpaper-based color palette and use it for theming.

## Features

-   **Android 12+ Support**: Extracts the full tonal palettes (Accent 1-3, Neutral 1-2) generated by the system.
-   **Safe Fallback**: Throws a clear error on unsupported platforms (iOS, Web, Android < 12), allowing for easy `try-catch` handling.
-   **Complete Palette**: Returns all 13 shades (0, 10, 50, 100-900, 1000) for each of the 5 tonal palettes.

## Installation

```bash
npm install android-dynamic-color
npx cap sync
```

## API Reference

### `getColors()`

Retrieves the system's dynamic color palette.

```typescript
getColors() => Promise<MonetPalette>
```

**Returns:** `Promise<MonetPalette>`

**Throws:** Error if the platform is not Android 12 (API 31) or higher.

---

### Interfaces

#### `MonetPalette`

The complete set of 5 tonal palettes.

```typescript
interface MonetPalette {
  accent1: TonalPalette;  // Primary accent colors (e.g., for buttons, active states)
  accent2: TonalPalette;  // Secondary accent colors
  accent3: TonalPalette;  // Tertiary accent colors
  neutral1: TonalPalette; // Neutral colors (e.g., for backgrounds, surfaces)
  neutral2: TonalPalette; // Neutral variant colors (e.g., for outlines, dividers)
}
```

#### `TonalPalette`

A map of shade values to hex color strings (e.g., `#FF0000`).

```typescript
interface TonalPalette {
  0: string;    // Lightest (White-ish)
  10: string;
  50: string;
  100: string;
  200: string;
  300: string;
  400: string;
  500: string;  // Base color
  600: string;
  700: string;
  800: string;
  900: string;
  1000: string; // Darkest (Black-ish)
}
```

## Usage Example (React + Tailwind)

This example demonstrates how to fetch the colors and apply them to CSS variables, which can then be used by Tailwind or standard CSS.

```tsx
import { useEffect } from 'react';
import { MonetColor } from 'android-dynamic-color';

export default function App() {
  useEffect(() => {
    const applyTheme = async () => {
      try {
        // 1. Attempt to get system colors
        const palette = await MonetColor.getColors();
        
        // 2. Map to CSS variables
        const root = document.documentElement;
        
        // Primary Color (Accent 1)
        root.style.setProperty('--color-primary', palette.accent1[600]);
        root.style.setProperty('--color-primary-container', palette.accent1[100]);
        root.style.setProperty('--color-on-primary', palette.accent1[0]); // Text on primary
        
        // Background (Neutral 1)
        root.style.setProperty('--color-background', palette.neutral1[10]);
        root.style.setProperty('--color-surface', palette.neutral1[50]);
        
        console.log('Monet theme applied successfully');
      } catch (error) {
        // 3. Fallback for Web/iOS/Old Android
        console.log('Monet colors not available, using default theme');
        // Optional: Set default fallback variables here if not defined in CSS
      }
    };

    applyTheme();
  }, []);

  return (
    <div className="bg-[var(--color-background)] min-h-screen p-4">
      <div className="bg-[var(--color-surface)] p-6 rounded-2xl shadow-sm">
        <h1 className="text-[var(--color-primary)] text-2xl font-bold mb-4">
          Dynamic Theme
        </h1>
        <button className="bg-[var(--color-primary)] text-[var(--color-on-primary)] px-4 py-2 rounded-full font-medium">
          Primary Action
        </button>
      </div>
    </div>
  );
}
```

## AI Prompting Guide (Vibe Coding)

When asking an AI to use this plugin, you can provide the following prompt:

> "I am using the `android-dynamic-color` Capacitor plugin. It has a single method `MonetColor.getColors()` which returns a Promise resolving to a `MonetPalette` object containing 5 `TonalPalette` objects (accent1-3, neutral1-2). Each TonalPalette has keys for shades 0, 10, 50, 100-900, 1000. Please write code to fetch these colors on app startup and apply them to CSS variables for theming. Handle the error case (non-Android 12 environment) by falling back to a default color scheme."
